# Фрактальное сжатие

Фрактальное сжатие — алгоритм сжатия изображений с потерями, основанный на поиске самоподобия в изображениях.

Это небыстрый алгоритм, но он позволяет получать отличные результаты в терминах размера сжатого изображения.

Максимально сжатое цветное изображение занимает всего 2 кб, но сохраняет основные черты.

![Сжатые изображения](images/qualities.jpg)

## Визуализация поиска блоков

Для каждого рангового (красного) блока найдем доменный (зеленый блок) и сохраним трансформацию, переводящую один в другой. Если найденный блок слишком плохой, окрасим его в соответствующий цвет.

[![Поиск блоков](images/simple_transforms.gif)](images/simple_transforms.mp4)

## Квадродерево

Для некоторых блоков (отмечены красным) мы нашли недостаточно хорошие трансформации.
![Плохие блоки](images/bad_blocks.png)
Разделим каждый такой блок на четыре части и проведем дополнительный поиск для каждой части.

## Цветное изображение

Для сжатия цветного изображения перейдем в цветовое пространство `YCbCr` и будем кодировать каждый компонент отдельно.

![YUV](images/yuv_components.jpg)

Можно показать, что цветовые компоненты не так важны и поэтому могут быть сжаты сильнее без существенной потери качества.

![YUV](images/colored_decompress.jpg)


## Запуск

Довольно хороший способ работать с ноутбуками заключается в том, чтобы не работать с ними. Ноутбуки очень объемные, они не позволяют удобно работать с `VCS` и линтерами. Поэтому я использую конвертер `.ipynb` в `.py`.

```
ipynb-py-convert fractal-compression.ipynb fractal-compression.py

ipynb-py-convert fractal-compression.py fractal-compression.ipynb
```
